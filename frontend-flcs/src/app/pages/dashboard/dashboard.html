<h2 class="mb-3">Dashboard</h2>

<!-- ACTIONS RAPIDES -->
<div class="d-flex gap-2 mb-4">
  <a routerLink="/app/candidats/add" class="btn btn-success">
    <i class="bi bi-person-plus"></i> Nouveau candidat
  </a>
  <a routerLink="/app/candidats" class="btn btn-outline-success">
    <i class="bi bi-list"></i> Voir les candidats
  </a>
</div>

<!-- LOADING -->
<div *ngIf="loading" class="text-center my-4">
  <div class="spinner-border text-success"></div>
</div>

<!-- STATS -->
<div class="row g-4 mb-5" *ngIf="!loading">

  <!-- TOTAL CANDIDATS -->
  <div class="col-md-4">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h6 class="d-flex align-items-center gap-2">
          <i class="bi bi-people-fill text-success"></i>
          Total candidats
        </h6>
        <h3 class="text-success">{{ totalCandidats }}</h3>

      </div>
    </div>
  </div>

  <!-- PAYÉS -->
  <div class="col-md-4">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h6 class="d-flex align-items-center gap-2">
          <i class="bi bi-cash-coin text-success"></i>
          Payés
        </h6>
        <h3 class="text-success">
          <h3 class="text-success">{{ candidatsPayes }}</h3>
        </h3>

        <span class="badge bg-light text-success border">
          {{ rentrees?.[0]?.libelle || 'Rentrée active' }}
        </span>
      </div>
    </div>
  </div>

  <!-- NON PAYÉS -->
  <div class="col-md-4">
    <div class="card shadow-sm h-100">
      <div class="card-body">
        <h6 class="d-flex align-items-center gap-2">
          <i class="bi bi-x-circle-fill text-danger"></i>
          Non payés
        </h6>
        <h3 class="text-danger">
          <h3 class="text-danger">{{ candidatsNonPayes }}</h3>

        </h3>
      </div>
    </div>
  </div>

</div>

<!-- APERÇU CANDIDATS -->
<div class="card shadow-sm mb-4" *ngIf="candidats.length > 0">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">Derniers candidats</h5>
      <a routerLink="/app/candidats" class="btn btn-sm btn-outline-success">
        Voir tout
      </a>
    </div>

    <table class="table table-sm align-middle">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Niveau</th>
          <th>Statut</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of candidats | slice:0:5">
          <td>{{ c.nom }} {{ c.prenom }}</td>
          <td>{{ c.niveau?.code || '-' }}</td>
          <td>
            <span 
              class="badge"
              [ngClass]="c.paye ? 'bg-success' : 'bg-danger'">
              {{ c.paye ? 'Payé' : 'Non payé' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ACTIVITÉ RÉCENTE (simple / statique pour l’instant) -->
<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="mb-3">Activité récente</h5>
    <ul class="list-group list-group-flush">
      <li class="list-group-item" *ngFor="let c of candidats | slice:0:3">
        <i class="bi bi-check-circle-fill text-success"></i>
        {{ c.nom }} {{ c.prenom }} ajouté
      </li>
    </ul>
  </div>
</div>
