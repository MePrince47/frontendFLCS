<div class="container py-4">
  <h2 class="mb-4">Historique des résultats</h2>

  <!-- ======================
       AUTOCOMPLETE ELEVE
  ====================== -->
  <div class="mb-3 position-relative">
    <label>Élève</label>
    <input type="text"
           [(ngModel)]="selectedEleve?.nom"
           (input)="filtrerEleves($event)"
           class="form-control"
           placeholder="Tapez le nom ou prénom de l'élève">
    
    <!-- Liste des suggestions -->
    <ul class="list-group position-absolute w-100" *ngIf="elevesFiltres.length" style="z-index: 1000;">
      <li class="list-group-item list-group-item-action"
          *ngFor="let e of elevesFiltres"
          (click)="selectionnerEleve(e)">
        {{ e.nom }} {{ e.prenom }}
      </li>
    </ul>
  </div>

  <!-- ======================
       SELECT NIVEAU
  ====================== -->
  <div class="mb-3">
    <label>Niveau</label>
    <select [(ngModel)]="niveauSelectionne" (change)="onNiveauChange()" class="form-control">
      <option *ngFor="let n of niveaux" [ngValue]="n">
        {{ n.code }} ({{ n.bareme }} pts)
      </option>
    </select>
  </div>

  <!-- ======================
       BOUTONS ACTION
  ====================== -->
  <div class="d-flex gap-2 mb-3">
    <button class="btn btn-primary" (click)="genererBulletin()">Générer bulletin</button>
    <button class="btn btn-success" (click)="telechargerPdf()">Télécharger PDF</button>
  </div>

  <!-- ======================
       MESSAGES & BULLETIN
  ====================== -->
  <div *ngIf="message" class="alert alert-info mt-3">{{ message }}</div>

  <pre *ngIf="bulletin">{{ bulletin | json }}</pre>
</div>
